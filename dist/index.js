!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ManhattanMaps=t():e.ManhattanMaps=t()}(this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(e,t,r){var n,o;n=r(1),o=function(){function Map(e,t){var r,o,i,a,u,s,l,c,p,h,m;for(null==t&&(t={}),n.config(this,{dragging:!1,attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a>',coords:[52.185766,-2.089655],groupPadding:[40,40],markers:"[data-mh-marker]",minZoom:8,maxZoom:18,scrollWheelZoom:!1,url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:13},t,e,this.constructor.clsPrefix),"string"==typeof this.coords&&(this.coords=this.coords.split(","),this.coords[0]=parseFloat(this.coords[0]),this.coords[1]=parseFloat(this.coords[1])),this._behaviours={},n.config(this._behaviours,{fetchMarkers:"selector",home:"coords",icon:"default",marker:"default",popup:"none"},t,e,this.constructor.clsPrefix),this._dom={},this._dom.elm=e,this._dom.elm.__mh_map=this,this._lmap=new L.Map(e,{dragging:this.dragging,scrollWheelZoom:this.scrollWheelZoom}),this._lmap.addLayer(new L.TileLayer(this.url,{minZoom:this.minZoom,maxZoom:this.maxZoom,attribution:this.attribution})),Object.defineProperty(this,"elm",{value:this._dom.elm}),Object.defineProperty(this,"lmap",{value:this._lmap}),Object.defineProperty(this,"lmarkers",{get:function(e){return function(){return e._lmarkers.slice()}}(this)}),this._lmarkers=[],r=this.constructor.behaviours,o=r.fetchMarkers[this._behaviours.fetchMarkers],a=r.icon[this._behaviours.icon],s=r.marker[this._behaviours.marker],l=r.popup[this._behaviours.popup],m=o(this),i=0,u=m.length;i<u;i++)h=m[i],c=s(this,h[0],a(h[1])),c.addTo(this.lmap),p=l(this,h[1]),p&&c.bindPopup(p),this._lmarkers.push(c);r.home[this._behaviours.home](this)}return Map.clsPrefix="data-mh-map--",Map.prototype._bem=function(e,t,r){var n;return null==t&&(t=""),null==r&&(r=""),n=e,t&&(n=n+"__"+t),r&&(n=n+"--"+r),n},Map.prototype._et=function(e){return"mh-map--"+e},Map.behaviours={fetchMarkers:{selector:function(e){var t,r,o,i,a,u;for(u=[],o=n.many(e.markers),i=0,a=o.length;i<a;i++)r=o[i],t=r.getAttribute("data-mh-marker--coords"),t=t.split(","),t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),u.push([t,r]);return u}},home:{coords:function(e){return e.lmap.setView(new L.LatLng(e.coords[0],e.coords[1]),e.zoom)},"first-marker":function(e){return e.lmarkers.length>0?e.lmap.setView(e.lmarkers[0].getLatLng(),e.zoom):e.constructor.behaviours.home.coords(e)},"fit-markers":function(e){var t;return e.lmarkers.length>0?(t=new L.featureGroup(e.lmarkers),e.lmap.fitBounds(t.getBounds(),{padding:e.groupPadding})):e.constructor.behaviours.home.coords(e)}},icon:{default:function(e,t){return new L.Icon.Default}},marker:{default:function(e,t,r){return new L.marker(t,{icon:r})}},popup:{none:function(e,t){},content:function(e,t){return t.firstElementChild.innerHTML}}},Map}(),e.exports={Map:o}},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,r){e.exports=r(1)},function(e,t){var r,n,o,i,a,u,s,l,c,p,h=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};r=function(e,t){var r;if(e.closest)return e.closest(t);for(r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!r.call(e,t);)e=e.parentElement;return e},o=function(e,t){var r,n,o;null==t&&(t={}),r=document.createElement(e);for(n in t)o=t[n],h.call(r,n)>=0?r[n]=o:r.setAttribute(n,o);return r},c=function(e,t){return null==t&&(t=document),Array.prototype.slice.call(t.querySelectorAll(e))},p=function(e,t){return null==t&&(t=document),t.querySelector(e)},a=function(e,t,r){var n,o,i;null==r&&(r={}),n=document.createEvent("Event"),n.initEvent(t,!0,!0);for(o in r)i=r[o],n[o]=i;return e.dispatchEvent(n)},s=function(e,t){var r,n,o,i;i=[];for(n in t)o=t[n],i.push(function(){var t,i,a,u;for(a=n.split(/\s+/),u=[],t=0,i=a.length;t<i;t++)r=a[t],u.push(e.removeEventListener(r,o));return u}());return i},l=function(e,t){var r,n,o,i;i=[];for(n in t)o=t[n],i.push(function(){var t,i,a,u;for(a=n.split(/\s+/),u=[],t=0,i=a.length;t<i;t++)r=a[t],u.push(e.addEventListener(r,o));return u}());return i},n=function(e,t,r,n,o){var i,a,u,s;null==o&&(o="data-"),u=[];for(a in t)s=t[a],e[a]=s,r.hasOwnProperty(a)&&(e[a]=r[a]),n&&(i=o+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n.hasAttribute(i)?"number"==typeof s?u.push(e[a]=parseInt(n.getAttribute(i))):!1===s?u.push(e[a]=!0):u.push(e[a]=n.getAttribute(i)):u.push(void 0));return u},u=function(e){return e.replace(/[\^\$\\\.\*\+\?\(\)\[\]\{\}\|]/g,"\\$&")},i=function(e){try{document.querySelector(e)}catch(e){return e,!1}return!0},e.exports={closest:r,create:o,one:p,many:c,dispatch:a,ignore:s,listen:l,config:n,escapeRegExp:u,cssSelectorSupported:i}}])})},function(e,t,r){var n,o;n=r(4),o=r(0),e.exports={Map:o.Map,MapField:n.MapField}},function(e,t,r){e.exports=r.p+"maps.css"},function(e,t,r){var n,o;n=r(1),r(0),o=function(){function MapField(e,t){var r,o,i,a,u,s,l,c,p,h;if(null==t&&(t={}),n.config(this,{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a>',geocodeInputs:[["postcode"],["city"]],geocodeUrl:"",latInput:"lat",lonInput:"lon",minZoom:8,maxZoom:18,url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:13},t,e,this.constructor.clsPrefix),"string"==typeof this.geocodeInputs)for(s=[],p=this.geocodeInputs.split(","),a=0,c=p.length;a<c;a++)l=p[a],s.push(l.split("+"));this._behaviours={},n.config(this._behaviours,{geocode:"none",getValue:"inputs",icon:"default",setValue:"inputs",sync:"inputs"},t,e,this.constructor.clsPrefix),this._dom={},this._dom.elm=e,this._dom.elm.__mh_mapField=this,this._lmap=new L.Map(e),this._lmap.addLayer(new L.TileLayer(this.url,{minZoom:this.minZoom,maxZoom:this.maxZoom,attribution:this.attribution})),Object.defineProperty(this,"elm",{value:this._dom.elm}),Object.defineProperty(this,"lmap",{value:this._lmap}),Object.defineProperty(this,"lmarker",{get:function(e){return function(){return e._lmarker}}(this)}),r=this.constructor.behaviours,i=r.getValue[this._behaviours.getValue],u=r.icon[this._behaviours.icon],this._lmarker=new L.marker(i(this)||[0,0],{draggable:!0,icon:u(this),keyboard:!1}),this._lmarker.addTo(this.lmap),this.lmarker.on({dragend:function(e){return function(t){var n,o;return r=e.constructor.behaviours,o=r.setValue[e._behaviours.setValue],n=e.lmarker.getLatLng(),o(e,[n.lat,n.lng]),e.lmap.setView(e.lmarker.getLatLng())}}(this)}),h=function(e){return function(t){var n,o,a;return n=e.lmarker.getLatLng(),n=[n.lat,n.lng],r=e.constructor.behaviours,i=r.getValue[e._behaviours.getValue],a=r.setValue[e._behaviours.setValue],o=i(e),o?e.lmarker.setLatLng(o):a(e,n),e.lmap.setView(e.lmarker.getLatLng())}}(this),n.listen(n.one("[name='"+this.latInput+"']"),{change:h}),n.listen(n.one("[name='"+this.lonInput+"']"),{change:h}),"none"!==this._behaviours.geocode&&(o=n.one(".leaflet-bottom.leaflet-left",this.elm),this._dom.findLocation=n.create("div",{class:"mh-map-field__find-location leaflet-control"}),this._dom.findLocation.textContent="Find location",o.appendChild(this._dom.findLocation),n.listen(this._dom.findLocation,{click:function(e){return function(t){var o,i,a,u,l,c,p,h,m,_;for(t.preventDefault(),m=[],_=e.geocodeInputs,u=0,c=_.length;u<c;u++){for(s=_[u],h=[],l=0,p=s.length;l<p;l++)a=s[l],(i=n.one("[name='"+a+"']"))&&i.value.trim()&&h.push(i.value.trim());h.length>0&&m.push(h.join(","))}return(o=function(t){var n,i;return r=e.constructor.behaviours,n=r.geocode[e._behaviours.geocode],i=r.setValue[e._behaviours.setValue],function(r){if(r)return i(e,r),e.lmarker.setLatLng(r),void e.lmap.setView(e.lmarker.getLatLng());if(0!==t.length)return h=t.shift(),r=n(e,h,o(t))}})(m)()}}(this)})),this.lmap.setView(this.lmarker.getLatLng(),this.zoom)}return MapField.clsPrefix="data-mh-map-field--",MapField.prototype._bem=function(e,t,r){var n;return null==t&&(t=""),null==r&&(r=""),n=e,t&&(n=n+"__"+t),r&&(n=n+"--"+r),n},MapField.prototype._et=function(e){return"mh-map-field--"+e},MapField.behaviours={geocode:{none:function(e,t,r){return null}},getValue:{inputs:function(e){var t,r;return t=parseFloat(n.one("[name='"+e.latInput+"']").value),r=parseFloat(n.one("[name='"+e.lonInput+"']").value),isNaN(t)||isNaN(r)?null:t<-180||t>180||r<-90||r>90?null:[t,r]}},icon:{default:function(e){return new L.Icon.Default}},setValue:{inputs:function(e,t){return n.one("[name='"+e.latInput+"']").value=t[0],n.one("[name='"+e.lonInput+"']").value=t[1]}}},MapField}(),e.exports={MapField:o}},function(e,t,r){r(3),e.exports=r(2)}])});